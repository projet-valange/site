<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="../../common/img/icon.png" rel="shortcut icon">
    <title>Valange</title>
    <!-- styles -->
    <link rel="stylesheet" href="../../lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../lib/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="../../common/style.css">
</head>

<body>

<nav id="mainNav" class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
  <a class="navbar-brand" href="./index.html">
    <span style="display: inline-block; background-color: white">
      <img src="../../common/img/logo/valangelogonobackground.png" alt="Valange" style="height: 50px;" />
    </span>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" 
    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active"><a class="nav-link" href="./valange.html">À propos</a></li>
      <li class="nav-item active"><a class="nav-link" href="./rechercher.html">Rechercher une vidéo</a></li>
      <li class="nav-item active"><a class="nav-link" href="./proposer.html">Proposer une vidéo</a></li>
      <li class="nav-item active"><a class="nav-link" href="./contact_re.html">Nous contacter</a></li>
    </ul>
    <button type="button" class="btn my-2 my-sm-0" data-toggle="modal" data-target="#infoModal">
      <img class="media-object" src="../../common/img/globe.png" style="height: 30px;">
      English</button>
  </div>
</nav>

<!-- Modal -->
<div class="modal" id="infoModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Version anglaise de VaLangE - English version of VaLangE</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>VaLangE est un bébé projet : il faudra patienter encore un peu avant qu'il devienne parfaitement
          bilingue. <br>
          <br>
          VaLangE is a baby project and is still acquiring the English language. Come back soon to watch it become a
          fully bilingual website!</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="container">

    <div class="media">
        <a class="pull-left" href="./index.html">
            <img class="media-object" src="../../common/img/logo.png" style="width:50%;"/>
        </a>
    </div>
    <hr>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-9 col-md-9">
                <h1><a style="color:#e88f47; ">F</a>ormulaire de contribution</h1>
                <p>Bienvenue sur le formulaire de contribution à notre base de données Videopedia !</p>
                <p>Nous vous invitons à remplir ce formulaire avec le plus grand soin, afin de permettre une meilleure
                    indexation de votre vidéo dans notre base. Ce formulaire court (10 minutes maximum) se présente en
                    deux
                    parties : la première, courte, porte sur vous en tant que contributeur·trice, tandis que la seconde
                    porte
                    sur
                    votre contribution. En cas de problème ou de question, veuillez contacter le ou la <a
                            href="mailto:contactvalange@gmail.com">webmestre</a>.</p>
                <p>Les champs obligatoires sont suivis de <abbr title="required">*</abbr>.</p><br>
                <h2>Contributeur·trice</h2>
                <p>Cette première partie du formulaire porte sur vous en tant que contributeur·trice. Les informations
                    que
                    vous
                    entrez dans cette section ne seront pas mises en ligne sur le site. Nous nous engageons à ne les
                    utiliser
                    que
                    pour vous contacter en cas de problème avec les informations transmises ou la vidéo, ainsi que pour
                    vous
                    notifier de la mise en ligne de cette dernière.</p>
                <legend>Informations sur le/la contributeur·trice</legend>
                <form role="form" method="post" id="reused_form" enctype=&quot;multipart/form-data&quot;>
                    <script src="../../common/parsemetadata.js"></script>
                    <script src="../../common/iso639.js"></script>
                    <div id="extract_edit">
                        <div class="edit-group">
                            <label for="name" class="required"><strong>Nom*</strong></label>
                            <input type="text" class="form-control" id="name" name="name" required maxlength="50">
                        </div>
                        <div class="edit-group">
                            <label for="name" class="required"><strong>Prénom*</strong></label>
                            <input type="text" class="form-control" id="surname" name="surname" required maxlength="50">
                        </div>
                        <div class="edit-group">
                            <label for="name"><strong>Institution</strong></label>
                            <p>Si vous êtes chercheur·se, précisez l'université, le laboratoire, etc.</p>
                            <input type="text" class="form-control" id="institution" name="institution"
                                    maxlength="50">
                        </div>
                        <div class="edit-group">
                            <label for="email" class="required"><strong>E-mail*</strong></label>
                            <input type="email" class="form-control" id="email" name="email" required maxlength="50">
                        </div>
                        <label class="email_contact_agreement">
                            <input class="email_contact_agreement" type="checkbox" id="contact" name="contact"
                                    value="contact ok">
                            <span class="checkmark" style="padding-right:10px;"></span>Voulez vous recevoir des courriers vous
                            informant des évolutions de Valange ?
                        </label>
                        <br/>
                        <h2>Contribution</h2>
                        <p id="secondpart">Cette seconde partie du formulaire concerne l'extrait vidéo que vous souhaitez nous
                            soumettre.</p>
                        <legend>Droit et fichier</legend>
                        <p id="infodroit">Attention, les vidéos de la base de données VaLangE sont sont soumises à une licence Creative
                            Commons
                            CC-BY-NC-ND (voir notre charte) et sont accessibles en ligne sans restriction. Il est donc
                            nécessaire
                            d'avoir le droit de partager votre contribution. En cochant la case ci-dessous, vous garantissez
                            que vous
                            disposez bien de ce droit et l'accord signé des parents de l'enfant filmé vous sera alors
                            demandé par mail.
                            La mise en ligne de votre contribution est conditionnée par l'acquisition de ce document.</p>
                        <label class="container_agreement">
                            <input class="checkbox_agreement" type="checkbox" id="agree" name="agree"
                                    value="agreement signed">
                            <span class="checkmark" style="padding-right:10px;"></span>J'ai le droit de déposer cette vidéo
                            dans la base Videopedia de VaLangE pour un usage scientifique.
                        </label>
                        <legend>Informations sur l'enfant</legend>
                        <div class="edit-group">
                            <label for="name" class="required"><strong>Nom de l'enfant*</strong></label>
                            <input type="text" class="form-control" id="namechi" name="namechi" required
                                    maxlength="50">
                        </div>
                        <p><strong>Genre*</strong></p>
                        <label class="label_genre"><input class="input_genre" type="radio" name="gender" value="girl"> Fille<span
                                class="checkmark"></span></label>
                        <label class="label_genre"><input class="input_genre" type="radio" name="gender" value="boy">
                            Garçon<span
                                    class="checkmark"></span></label>
                        <label class="label_genre"><input class="input_genre" type="radio" name="gender"
                                                            value="unknown">
                            Préfère ne pas préciser<span class="checkmark"></span></label>
                        <br>
                        <p class="required"><strong>Âge*</strong><br>
                            Âge de l'enfant au moment de la vidéo au format (A)A;MM(;DD). Par exemple, pour un enfant
                            de 10
                            mois et 24 jours, mettre 0;10;24 ; pour un enfant de 34 mois, mettre 2;10 ; pour un enfant de 10
                            ans 2 mois
                            et 3 jours, mettre 10;02;03.</p>
                        <div class="edit-group">
                            <input type="text" class="form-control" id="age" name="age" required maxlength="50">
                        </div>
                        <div class="edit-group">
                            <label for="name"><strong>Localisation</strong></label>
                            <p>Ville et pays où vit l'enfant au moment de la vidéo.</p>
                            <input type="text" class="form-control" id="localisation" name="localisation"
                                    maxlength="300">
                        </div>
                        <br>
                        <div class="edit-group">
                            <label class="control-label"><strong>Langue(s) maternelle(s) de l'enfant</strong> (s'il 
                                apprend plusieurs langues simultanément, les donner toutes 
                                dans un ordre quelconque, sinon dans l'ordre d'apprentissage) :</label>
                            <span id="langmotherchoices"></span>
                            <div class="langchoices">
                                Langues présentes dans Valange: 
                                <div class="row editcore" id="langmotherlist"></div>
                                <label onclick="window.addlang('langmotherisolist', 'langmotherchoices', 'langmotherselected');" 
                                    id="langmotheradd" class="control-label" 
                                    for="langmotheriso">Ajouter une autre langue &#x25a2; </label>
                                <span id="langmotheriso"></span>
                            </div>
                        </div>
                        <div class="edit-group">
                            <label class="control-label"><strong>Langue(s) seconde(s) que parle l'enfant (s'il 
                                apprend plusieurs langues simultanément, les donner toutes 
                                dans un ordre quelconque, sinon dans l'ordre d'apprentissage) :</strong></label>
                            <span id="langsecondchoices"></span>
                            <div class="langchoices">
                                Langues présentes dans Valange: 
                                <div class="row editcore" id="langsecondlist"></div>
                                <label onclick="window.addlang('langsecondisolist', 'langsecondchoices', 'langsecondselected');" 
                                    id="langsecondadd" class="control-label" 
                                    for="langsecondiso">Ajouter une autre langue &#x25a2; </label>
                                <span id="langsecondiso"></span>
                            </div>
                        </div>
                        <legend>Informations sur l'extrait</legend>
                        <div class="edit-group">
                            <label class="control-label"><strong>Langue(s) de l'extrait proposé (si plusieurs langues, les 
                                proposer par ordre de fréquence d'utilisation dans l'extrait) :</strong></label>
                                <!--
                                    langextractchoices : contains the choices of the user
                                    langextractlist : contains the list of possible choices from the valange database
                                    langextractiso : contains list of the iso values for language
                                    langextractselected : class of the choices of the user for easy selection of all choices
                                    langextractisolist : id of the list of iso values for easy selection
                                -->
                            <span id="langextractchoices"></span>
                            <div class="langchoices">
                                Langues présentes dans Valange: 
                                <div class="row editcore" id="langextractlist"></div>
                                <label onclick="window.addlang('langextractisolist', 'langextractchoices', 'langextractselected');" 
                                    id="langextractadd" class="control-label" 
                                    for="langextractiso">Ajouter une autre langue &#x25a2; </label>
                                <span id="langextractiso"></span>
                            </div>
                        </div>

                        <div class="edit-group">
                            <label for="name"><strong>Nom du projet</strong></label>
                            <p>Nom du projet de recherche ou de recueil d'extraits</p>
                            <input type="text" class="form-control" id="project" name="project" 
                                    maxlength="120">
                        </div>
                        <div class="edit-group">
                            <label for="title" class="required"><strong>Titre (nom de l'extrait)*</strong></label>
                            <input type="text" class="form-control" id="title" name="title" required maxlength="80">
                        </div>
                        <div class="edit-group">
                            <label class="control-label" for="description"><strong>Description :</strong></label>
                            <textarea class="span5" rows="8" id="description" name="description" style="width:90%;"
                              placeholder="Entrez votre description"></textarea>
                        </div>
                        <div class="edit-group">
                            <label class="control-label" for="transcription"><strong>Transcription :</strong></label>
                            <textarea class="span5" rows="8" id="transcription" name="transcription" style="width:90%;"
                              placeholder="Entrez votre transcription"></textarea>
                        </div>
                        <div class="edit-group">
                            <label class="control-label" for="quote"><strong>Références bibliographiques :</strong></label>
                            <textarea class="span5" rows="8" id="quote" name="quote" style="width:90%;"
                              placeholder="Entrez vos références"></textarea>
                        </div>
                        <p><strong>Genre de discours</strong></p>
                        <label class="label_discours"><input class="input_discours" type="radio" name="disc"
                                                            value="monologue">
                            Monologue<span class="checkmark"></span></label>
                        <label class="label_discours"><input class="input_discours" type="radio" name="disc"
                                                            value="interaction">
                            Interaction<span class="checkmark"></span></label>
                        <label class="label_discours"><input class="input_discours" type="radio" name="disc"
                                                            value="unknown"> Je
                            ne sais pas<span class="checkmark"></span></label>
                        
                        <p><strong>Activités, thèmes, mots-clés</strong><br/>
                            Vous devez indiquer quels mots-clés permettront d'identifier et de retrouver votre extrait.
                            Ces éléments sont très importants pour valoriser votre extrait. Il n'est pas obligatoire d'en
                            mettre, mais plus vous mettre des mots-clés pertinents et bien choisis, plus votre
                            extrait sera bien valorisé.
                        </p>
                        <div class="edit-group">
                            <label class="control-label"><strong>Activités :</strong></label>
                            <div class="row editcore" id="listactkey"></div>
                            <label class="control-label" for="actkey">Autre(s) activité(s) :</label>
                            <input type="text" class="form-control" id="actkey" name="actkey" maxlength="240">
                        </div>
                        <div class="edit-group">
                            <label class="control-label"><strong>Thèmes :</strong></label>
                            <div class="row editcore" id="listthemekey"></div>
                            <label class="control-label" for="themekey">Autre(s) thème(s) :</label>
                            <input type="text" class="form-control" id="themekey" name="themekey" maxlength="240">
                        </div>
                        <!--
                        <div class="edit-group">
                            <label class="control-label"><strong>Mots-clés complémentaires :</strong></label>
                            <div class="row editcore" id="listkeys"></div>
                            <label class="control-label" for="keywords">Autre(s) mots-clé(s) complémentaire(s) :</label>
                            <input type="text" class="form-control" id="keywords" name="keywords" maxlength="240">
                        </div>
                        -->
                        <div class="edit-group">
                            <label class="control-label" for="extmedia"><strong>Lien externe pour la vidéo source (si présente sur un site) :</strong></label>
                            <input type="text" class="form-control" id="extmedia" name="extmedia" maxlength="240">
                        </div>
                        <br>
                    </div>

                    <script src="../../data/json/db.js"></script>
                    <script src="../../data/json/categories.js"></script>
                    <script src="../../common/lookfor.js"></script>
                    <script src="../../common/editcore.js"></script>
                    <script>
                        initTotalValue(valange_data); // initalize values in lookfor.js
                        createHtmlEdit(); // finalize creation of html
                    </script>
                    <div class="form-group">
                        <input class="form-control" type="hidden" id="xmldata" name="xmldata">
                    </div>
                    <div class="form-group">
                        <input class="form-control" type="hidden" id="entryname" name="entryname">
                    </div>
                    <div class="form-group">
                        <!-- MAX_FILE_SIZE doit précéder le champ input de type file -->
                        <input type="hidden" name="MAX_FILE_SIZE" value="100000000" />
                        <label for="name" style="font-size:20px;"> Charger la vidéo :</label>
                        <input type="file" class="form-control" id="file" name="file" required>
                    </div>
                    <button type="submit" class="btn btn-lg btn-success pull-right" id="btnContactUs"
                            style="text-align:center;">Envoyer la contribution!
                    </button>
                </form>
                <div id="success_message" style="width:100%; height:100%; display:none; ">
                    <h3>Votre message a bien été envoyé!</h3>
                </div>
                <div id="error_message" style="width:100%; height:100%; display:none; ">
                    <h3>Erreur</h3> Désolé: il y a eu un problème en envoyant votre message.
                </div>
            </div>
        </div>
    </div>
    <br/>
    <hr>

    </br>
    <h2><a style="color:#e88f47; ">I</a>ls nous soutiennent</h2></br></br>
    <div class="row" style="text-align:center;">
      <a href="http://www.labex-efl.com/wordpress/"><img src="../../common/img/footer/logo_labexEFL.jpg"
          class="img-rounded footerimg"></a>
      <a href="http://www.sorbonne-paris-cite.fr/fr"><img src="../../common/img/footer/logoUSPC.jpeg"
          class="img-rounded footerimg"></a>
      <a href="http://www.culturecommunication.gouv.fr/Politiques-ministerielles/langue-francaise-et-langues-de-France"><img
          src="../../common/img/footer/logo_culture.jpg" class="img-rounded footerimg"></a>
      <a href="http://www.modyco.fr/fr/"><img src="../../common/img/footer/logo_modyco.png"
          class="img-rounded footerimg"></a>
      <a href="https://www.ortolang.fr/market/home"><img src="../../common/img/footer/logo_ortolang.png"
          class="img-rounded footerimg"></a>
      <a href="http://www.univ-paris3.fr/"><img src="../../common/img/footer/logo_paris3_niou.jpg"
          class="img-rounded footerimg"></a>
      <a href="http://www.parisnanterre.fr/"><img src="../../common/img/footer/logo_paris10.png"
          class="img-rounded footerimg"></a>
      <hr>
      <p id="valangefooter">VaLangE (Videopedia autour du Langage de l’Enfant) est un site participatif qui rassemble un large corpus
        d’extraits vidéo d’enfants filmés au cours d’études ponctuelles ou longitudinales, de manière écologique ou lors
        de tâches semi-guidées, en dialogue ou en monologue. Ces ethnographies portent sur l’acquisition du langage par
        des jeunes locuteurs de 0 à 7 ans, entendants et sourds, monolingues et bilingues : français, anglais, italien,
        portugais... VaLangE propose chaque extrait accompagné de sa fiche : transcription, description, métadonnées et
        références bibliographiques. Ceux-ci peuvent être utilisés par des chercheurs et des professeurs pour constituer
        leur corpus ou illustrer leurs cours avec des exemples clés en main. Les chercheurs sont invités à contribuer
        eux-mêmes à la plateforme en déposant des extraits. Des dossiers thématiques autour de l’apprentissage d’une ou
        plusieurs langues par les enfants sont également proposés : babillage, premiers mots, étayage, erreurs,
        références à soi, temporalité... Autant de concepts rendus accessibles aux étudiants et au grand public.</p>
    </div>

    <div class="row" id="footer">
        <p>&copy; Copyright 2018-2019<br/>
        This website made by <a href="http://stat34.github.io/Seongmin/">Seongmin</a>, Ilaine,
            Constance, and Christophe.<br/>
        <span style="font-size: smaller">Mis à jour le 14 mai 2019</span></p>
    </div>

</div> <!-- /container -->

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="../../lib/jquery/jquery.min.js"></script>
<!-- <script src="../../lib/popper/popper.js"></script> -->
<script src="../../lib/bootstrap/js/bootstrap.min.js"></script>
<script>
    function after_form_submitted_execute(data) {
        //console.log("after:", data);
        if (data == 1) {
            $('form#reused_form').hide();
            $('#success_message').show();
            $('#error_message').hide();
        } else {
            $('#error_message').append('<ul></ul>');

            jQuery.each(data.errors, function (key, val) {
                $('#error_message ul').append('<li>' + key + ':' + val + '</li>');
            });
            $('#success_message').hide();
            $('#error_message').show();

            //reverse the response on the button
            $('button[type="button"]', $form).each(function () {
                $btn = $(this);
                label = $btn.prop('orig_label');
                if (label) {
                    $btn.prop('type', 'submit');
                    $btn.text(label);
                    $btn.prop('orig_label', '');
                }
            });

        }
    }

    function after_form_submitted(data) {
        setTimeout(function () {
            after_form_submitted_execute(data)
        }, 1000);
    }

    $('#reused_form').submit(function (e) {
        e.preventDefault();
        var data = getXmlDataUser();
        if (data === '') {
            console.log("Saisie annulée.");
            return;
        }
        var entry = getEntryName();

        // console.log("xml", getXmlData());
        console.log("xml", data);
        console.log("entry", entry);
        console.log($("#file")[0].value);
        // get the xml data content
        var v = $('input[name="xmldata"]');
        v.val(data);
        v = $('input[name="entryname"]');
        v.val(entry);

        $form = $(this);
        //show some response on the button
        $('button[type="submit"]', $form).each(function () {
            $btn = $(this);
            $btn.prop('type', 'button');
            $btn.prop('orig_label', $btn.text());
            $btn.text('Envoi ...');
        });

        var formdata = new FormData(this);
        $.ajax({
            type: "POST",
            url: '../../common/sendproposition.php',
            data: formdata,
            success: after_form_submitted,
            dataType: 'json',
            processData: false,
            contentType: false,
            cache: false
        });

    });
</script>

</body>

</html>